<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="forgot-password-header">
      <div class="logo">
        <img src="./assets/logo_epermis.png" alt="E-Permis Sénégal" width="80" height="80"/>
      </div>
      <h1>Réinitialisation du mot de passe</h1>
      <p class="subtitle">Entrez votre adresse email pour recevoir un lien de réinitialisation</p>
    </div>

    <form (ngSubmit)="onSubmit()" class="forgot-password-form">
      
      <div class="form-group">
        <label for="email">Adresse Email</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="email"
          placeholder="exemple@email.com"
          [disabled]="loading"
          required
        />
        <p class="form-hint">
          Entrez l'adresse email associée à votre compte E-Permis
        </p>
      </div>

      <div *ngIf="error" class="error-message">
         {{ error }}
      </div>

      <div *ngIf="success" class="success-message">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
          <strong>Demande envoyée avec succès !</strong>
        </div>
        <p>{{ successMessage }}</p>
        <small>
          <strong>Important :</strong> Vérifiez votre boîte email (et dossier spam).<br>
          Le lien de réinitialisation sera envoyé depuis <strong>no-reply@gainde2000.sn</strong>
        </small>
      </div>

      <button 
        type="submit" 
        class="submit-button" 
        [disabled]="loading || !email.trim()"
      >
        <span *ngIf="!loading">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
            <path d="M22 2L11 13"></path>
            <path d="M22 2l-7 20-4-9-9-4 20-7z"></path>
          </svg>
          Envoyer le lien de réinitialisation
        </span>
        <span *ngIf="loading">
          <svg class="spinner" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="#E2E8F0" stroke-width="4"/>
            <path d="M12 2C13.3132 2 14.6136 2.25866 15.8268 2.7612C17.0401 3.26375 18.1425 4.00035 19.0711 4.92893C19.9997 5.85752 20.7362 6.95991 21.2388 8.17317C21.7413 9.38642 22 10.6868 22 12" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round"/>
          </svg>
          Envoi en cours...
        </span>
      </button>

      <div class="back-to-login">
        <a [routerLink]="['/login']" class="back-link">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Retour à la connexion
        </a>
      </div>
    </form>

    <div class="forgot-password-footer">
      <p><strong>Note :</strong> Le lien sera envoyé depuis <strong>no-reply@gainde2000.sn</strong> et sera valide 24 heures.</p>
      <p style="font-size: 11px; color: #94A3B8; margin-top: 4px;">
        Si vous ne recevez pas l'email, vérifiez votre dossier spam ou contactez l'administrateur.
      </p>
    </div>
  </div>
</div>